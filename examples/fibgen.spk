#!/usr/bin/env spike

extern cdecl int printf() {}

fib() {
    return [
        obj a, b, tmp;
        
        a = 0;
        b = 1;
        while (true) {
            yield a;
            tmp = a;
            a = b;
            b = tmp + b;
        }
        ];
}

main(argv) {
    obj gen, max, n;
    
    gen = fib();
    max = 1000;
    n = gen();
    while (n < max) {
        printf("%d\n", n);
        n = gen();
    }
    return 0;
}
